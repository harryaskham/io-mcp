{"id":"bd-10c","title":"PulseAudio auto-reconnect when pls indicator goes red","description":"When the pls health check detects PulseAudio is down, attempt auto-reconnect or restart paplay connections. Currently the red indicator just shows the problem but doesn't try to fix it.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-02-24T21:12:56.744014Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:59.193322Z","closed_at":"2026-02-24T23:09:59.193291Z","close_reason":"done","external_ref":"13","compaction_level":0,"original_size":0}
{"id":"bd-11f","title":"The old activity feed is still showing with the queue, dashboard, settings links - after I respond to an agent or return to inbox after going back from text entry","description":"nil","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T22:46:55.217598Z","created_by":"harryaskham","updated_at":"2026-02-25T23:22:21.840264Z","closed_at":"2026-02-25T23:22:21.840205Z","external_ref":"34","compaction_level":0,"original_size":0,"labels":["merged"]}
{"id":"bd-137","title":"Inbox items should show which agent sent them in multi-agent mode","description":"When multiple agents are connected, inbox items only show the preamble. Should also show the agent/session name so the user knows which agent is asking.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-137\", pr_number: \"28\", status: \"human_review_needed\"}}","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-02-24T23:11:31.418345Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:34.982347Z","closed_at":"2026-02-24T23:54:34.982310Z","close_reason":"done","external_ref":"28","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
{"id":"bd-154","title":"Freeform text input should use termux-tts-speak for all readback","description":"Freeform TTS engine is created with local=True which historically meant espeak. While speak_with_local_fallback was added for character-by-character readback, the freeform TTS engine itself still falls back to espeak for speak() and speak_async() calls. Should ensure all freeform audio paths use the configured local backend.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-154\", pr_number: \"15\", status: \"approved\"}}","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-02-24T21:13:12.152751Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:59.750518Z","closed_at":"2026-02-24T23:09:59.750465Z","close_reason":"done","external_ref":"15","compaction_level":0,"original_size":0,"labels":["needs_review"]}
{"id":"bd-16f","title":"Delete and regenerate config.yml to pick up new defaults cleanly","description":"The user's config.yml may have stale keys or missing new defaults. Document the process: delete ~/.config/io-mcp/config.yml, restart io-mcp, it regenerates with all current defaults. Or add an io-mcp --reset-config flag.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-16f\", pr_number: \"23\", status: \"human_review_needed\"}}","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-24T23:11:31.172271Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:35.083520Z","closed_at":"2026-02-24T23:54:35.083483Z","close_reason":"done","external_ref":"23","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
{"id":"bd-16o","title":"Freeform text input hangs after each character — termux-tts-speak blocks","description":"speak_with_local_fallback uses termux-tts-speak which blocks until speech finishes. For freeform text readback (character-by-character as you type), this causes the TUI to hang after each delimiter. Freeform readback should use espeak (non-blocking file-based) or a dedicated non-blocking path. termux-tts-speak should still be used for scroll readout of uncached options.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-16o\", pr_number: \"31\", status: \"human_review_needed\"}}","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-24T23:40:13.188556Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:33.630836Z","closed_at":"2026-02-24T23:54:33.630799Z","close_reason":"done","external_ref":"31","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
{"id":"bd-1a2","title":"Add djent swarm control to io-mcp quick settings","description":"Allow starting/stopping/viewing the djent swarm from within io-mcp. Quick settings could have: Start swarm, Stop swarm, Swarm status, View agent logs. This would let the user control the swarm entirely via scroll wheel.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-1a2\", pr_number: \"25\", status: \"human_review_needed\"}}","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-02-24T23:11:31.613941Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:34.891429Z","closed_at":"2026-02-24T23:54:34.891386Z","close_reason":"done","external_ref":"25","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
{"id":"bd-1k9","title":"Log viewer in settings/quick settings menu","description":"Add a 'View logs' option to quick settings that shows recent TUI errors, proxy logs, and speech history in a scrollable view within the TUI itself. Useful for debugging without needing SSH or the get_logs MCP tool.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-02-24T21:12:25.226313Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:59.490034Z","closed_at":"2026-02-24T23:09:59.490003Z","close_reason":"done","external_ref":"14","compaction_level":0,"original_size":0}
{"id":"bd-1tn","title":"On desktop, in the --default-config, I'm getting espeak instead of good quality tts","description":"nil","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T18:50:41.503344Z","created_by":"harryaskham","updated_at":"2026-02-25T19:02:09.303745Z","closed_at":"2026-02-25T19:02:09.303687Z","close_reason":"Removed hardcoded TTS_TOOL_DIR fallback to ~/mono/tools/tts. Now falls back to espeak only when tts binary is genuinely missing from PATH. Also simplified the tts-not-found warning.","compaction_level":0,"original_size":0}
{"id":"bd-1zi","title":"Replace raw threading.Thread TTS calls with asyncio task pool","description":"The TTSEngine uses 46+ raw threading.Thread(daemon=True).start() calls scattered across speak_async, speak_streaming_async, stop, play_cached, and speak_with_local_fallback. These create unbounded thread pile-ups on rapid scroll. Refactor to: (1) Create a bounded ThreadPoolExecutor(max_workers=4) for subprocess-heavy TTS operations, (2) Replace fire-and-forget threading.Thread with loop.run_in_executor() calls that are cancellable, (3) Add a TTS task queue that coalesces rapid scroll requests (keep only the latest), (4) Use asyncio.Queue for the TTS pipeline: generate, cache, play. The scroll generation counter pattern (_scroll_gen) should be replaced with proper task cancellation.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-25T23:39:03.589974Z","created_by":"harryaskham","updated_at":"2026-02-25T23:39:47.643015Z","compaction_level":0,"original_size":0,"labels":["modernization","tts"],"dependencies":[{"issue_id":"bd-1zi","depends_on_id":"bd-2bh","type":"blocks","created_at":"2026-02-25T23:39:47.643003Z","created_by":"harryaskham"}]}
{"id":"bd-278","title":"Add agent-initiated session close with user confirmation","description":"When an agent finishes its work and has no more choices to present, it should be able to request closing its session. This should work like run_command — the user sees a confirmation prompt (y/n via choices). If the user confirms, the session is closed and the tab is removed. If the user declines, they provide a reason (via freeform input or predefined choices like 'keep working', 'review changes', 'something else'), and the agent receives that reason and continues. New MCP tool: request_close(reason='Work complete') that presents the user with Accept/Decline choices. On decline, returns the user's reason text so the agent knows what to do next. This prevents orphaned sessions from agents that finish but leave empty tabs.","status":"in_progress","priority":2,"issue_type":"feature","assignee":"alice","created_at":"2026-02-25T23:43:12.284845Z","created_by":"harryaskham","updated_at":"2026-02-25T23:44:41.632340Z","compaction_level":0,"original_size":0,"labels":["claimed","feature","mcp","session"]}
{"id":"bd-27a","title":"PulseAudio health check should try to auto-recover","description":"The pls tab bar indicator shows red when PulseAudio is down but doesn't attempt recovery. Could try: restart paplay, reconnect PULSE_SERVER, or notify the user with specific recovery steps.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-27a\", pr_number: \"24\", status: \"human_review_needed\"}}","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-24T23:11:30.947616Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:34.607707Z","closed_at":"2026-02-24T23:54:34.607671Z","close_reason":"done","external_ref":"24","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
{"id":"bd-298","title":"Remove activity feed, replace with inbox-native waiting view","description":"The old _show_activity_feed with actionable items (Queue message, Settings, Dashboard, Pane view) and speech log should be replaced by the inbox view. Right pane should show a clean waiting state with essential shortcuts when agent is working. Activity feed code can be removed once inbox fully replaces it.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-24T21:11:54.143337Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:58.961928Z","closed_at":"2026-02-24T23:09:58.961898Z","close_reason":"done","external_ref":"10","compaction_level":0,"original_size":0}
{"id":"bd-2al","title":"Add TTS audio queue with priority and deduplication","description":"Multiple concurrent speak_async calls race to play audio — each spawns its own thread, calls stop_sync() (killing the previous), then starts playback. This causes audible glitches. Implement a TTSAudioQueue with: (1) Priority levels: urgent (interrupts), normal (queues), ambient (skips if busy), (2) Deduplication: skip if same text already queued or playing, (3) Crossfade/gap control: configurable pause between queued items, (4) Queue draining: flush non-urgent items when new choices arrive, (5) Integration with wait_for_speech() which currently polls in a loop. Replaces the fragile _fg_speaking flag and manual thread coordination.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-25T23:39:03.936276Z","created_by":"harryaskham","updated_at":"2026-02-25T23:39:47.973762Z","compaction_level":0,"original_size":0,"labels":["modernization","tts"],"dependencies":[{"issue_id":"bd-2al","depends_on_id":"bd-1zi","type":"blocks","created_at":"2026-02-25T23:39:47.973750Z","created_by":"harryaskham"},{"issue_id":"bd-2al","depends_on_id":"bd-2bh","type":"blocks","created_at":"2026-02-25T23:39:47.822574Z","created_by":"harryaskham"}]}
{"id":"bd-2bh","title":"Extract TTS playback into async subprocess manager","description":"Currently _start_playback, speak_streaming, and _generate_to_file all directly call subprocess.Popen with manual process tracking via self._process, self._streaming_tts_proc, and self._termux_proc. Create an AsyncSubprocessManager class that: (1) Wraps asyncio.create_subprocess_exec for non-blocking process creation, (2) Tracks active processes with automatic cleanup, (3) Provides cancel_all() replacing stop()/stop_sync() dual pattern, (4) Handles process group killing (os.killpg) in a single place, (5) Eliminates self._lock threading.Lock which causes contention on proot. Addresses documented pitfall: Lock contention on self._lock.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-2bh\", pr_number: \"37\", status: \"human_review_needed\"}}","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2026-02-25T23:39:03.758202Z","created_by":"harryaskham","updated_at":"2026-02-25T23:47:14.269680Z","external_ref":"37","compaction_level":0,"original_size":0,"labels":["human_review_needed","modernization","tts"]}
{"id":"bd-2bu","title":"Duplicate inbox items still appear in some cases","description":"Despite dedup logic (cancel identical preamble+choices), duplicates still appear during normal operation (not just MCP retries). May need a more aggressive approach like session-level mutex or timestamp-based dedup window.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-24T21:11:36.619908Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:59.119172Z","closed_at":"2026-02-24T23:09:59.119135Z","close_reason":"done","external_ref":"6","compaction_level":0,"original_size":0}
{"id":"bd-2ca","title":"Randomize voice/emotion rotation assignment for new sessions","description":"Voice and emotion rotation currently assigns sequentially: session_idx % len(voice_rot). This means when only 1-2 agents are active at a time (common pattern), they always get the same first voices from the rotation list. Change to random sampling without replacement: (1) On session registration, pick a random voice+emotion from the rotation list that isn't currently assigned to any active session. (2) Track which voices are in use via SessionManager. (3) If all voices are in use, allow duplicates but pick the least-recently-used. (4) Add a config option tts.voiceRotation.random (default true) to toggle between sequential and random modes. This ensures variety when agents come and go throughout the day. Code location: tui/app.py line 3434, the session_idx % len(voice_rot) pattern.","status":"in_progress","priority":2,"issue_type":"feature","assignee":"carol","created_at":"2026-02-25T23:54:24.840750Z","created_by":"harryaskham","updated_at":"2026-02-25T23:54:58.399121Z","compaction_level":0,"original_size":0,"labels":["claimed","feature","session","tts"]}
{"id":"bd-2cl","title":"Cross-session inbox view","description":"Show all pending choices across all agent tabs in one scrollable list. Like a unified inbox that lets the user see and respond to any agent's choices without switching tabs. Could be accessed via a key shortcut or from the dashboard.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-2cl\", pr_number: \"17\", status: \"approved\"}}","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-24T21:12:10.641844Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:58.796927Z","closed_at":"2026-02-24T23:09:58.796892Z","close_reason":"done","external_ref":"17","compaction_level":0,"original_size":0,"labels":["needs_review"]}
{"id":"bd-2f3","title":"TUI colors break inside tmux; ensure consistent with outside tmux","description":"nil","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T17:24:28.551184Z","created_by":"harryaskham","updated_at":"2026-02-25T18:32:37.783110Z","closed_at":"2026-02-25T18:32:37.783075Z","close_reason":"Fixed: set COLORTERM=truecolor at startup when missing (tmux strips it), and upgrade TERM from screen* to xterm-256color. Commit e41e785.","compaction_level":0,"original_size":0}
{"id":"bd-2h4","title":"Agent-appended options like 'More options', 'Propose next work' appear in choices","description":"The __main__.py append_options and config extras are adding items like 'More options', 'Propose next work', 'Commit and push' etc. to the choices list alongside the collapsed extras. This creates confusion since 'More options' appears both as a collapsed toggle and as an agent-appended choice. These should be deduplicated or the append logic should respect the collapsed extras.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-2h4\", pr_number: \"21\", status: \"human_review_needed\"}}","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-24T23:11:30.527903Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:34.797647Z","closed_at":"2026-02-24T23:54:34.797606Z","close_reason":"done","external_ref":"21","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
{"id":"bd-2jg","title":"Scroll wheel (mouse scroll events) doesn't target inbox pane even when focused","description":"Even after pressing h to focus the inbox pane, mouse scroll events may still go to the choices pane. The _active_list_view logic checks _inbox_pane_focused but Textual's mouse event routing may bypass this for scroll events that hit the choices widget directly.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-2jg\", pr_number: \"18\", status: \"human_review_needed\"}}","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-24T23:11:30.739162Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:34.699967Z","closed_at":"2026-02-24T23:54:34.699932Z","close_reason":"done","external_ref":"18","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
{"id":"bd-2p0","title":"Clicking an inbox item does not focus that item at least for done","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-24T20:58:08.553299Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:58.647109Z","closed_at":"2026-02-24T23:09:58.647078Z","close_reason":"done","external_ref":"1","compaction_level":0,"original_size":0}
{"id":"bd-2r0","title":"Config file not auto-updated with new default keys on restart","description":"When new config keys are added (e.g. localBackend), _deep_merge correctly fills them from defaults and save() writes back. But the user's config.yml on disk may not show the new key until they restart io-mcp. Should document this behavior or add a config migration step.","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-02-24T21:12:42.690182Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:59.337787Z","closed_at":"2026-02-24T23:09:59.337755Z","close_reason":"done","external_ref":"5","compaction_level":0,"original_size":0}
{"id":"bd-2s2","title":"New inbox items don't appear at top of unified inbox after selection","description":"After making a selection on an agent's choices, the TUI should jump back to the unified inbox view with any new items at the top. Instead it appears to stay on the per-agent inbox. Two issues: (1) After selecting a choice, the view doesn't return to the unified (cross-session) inbox - it stays focused on the single agent's items. (2) When new items arrive from any agent, they should appear at the top of the unified inbox list so the user sees them immediately without scrolling. The unified inbox (introduced in commit 0afcb14) should be the default landing view after every selection.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-2s2\", pr_number: \"39\", status: \"approved\"}}","status":"in_progress","priority":1,"issue_type":"bug","created_at":"2026-02-25T23:42:00.699103Z","created_by":"harryaskham","updated_at":"2026-02-25T23:55:29.340282Z","external_ref":"39","compaction_level":0,"original_size":0,"labels":["approved","bug","inbox","tui"]}
{"id":"bd-2t5","title":"Entering message send from inbox via 'm' key does not return me to the inbox","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-24T21:20:59.174780Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:58.487441Z","closed_at":"2026-02-24T23:09:58.487409Z","close_reason":"done","external_ref":"4","compaction_level":0,"original_size":0}
{"id":"bd-2zq","title":"Split app.py monolith into focused controller modules","description":"app.py is 5,252 lines handling choices, inbox, tab switching, daemon health, PulseAudio recovery, haptics, filtering, conversation mode, multi-select, agent spawning, and more. While ViewsMixin, VoiceMixin, and SettingsMixin exist, the main app class still contains most logic. Split into: (1) tui/choices.py — ChoicesController: choice presentation, selection, filtering, multi-select, (2) tui/inbox.py — InboxController: two-column inbox layout, inbox navigation, drain logic, (3) tui/tabs.py — TabController: tab bar, tab switching, session lifecycle, (4) tui/health.py — HealthController: daemon health checks, PulseAudio recovery, notifications, (5) tui/haptics.py — HapticsController: vibration patterns, termux-vibrate subprocess management. Each controller takes a reference to the app and manages its own state.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-25T23:39:04.299141Z","created_by":"harryaskham","updated_at":"2026-02-25T23:39:48.280465Z","compaction_level":0,"original_size":0,"labels":["modernization","refactor","tui"],"dependencies":[{"issue_id":"bd-2zq","depends_on_id":"bd-2al","type":"blocks","created_at":"2026-02-25T23:39:48.280453Z","created_by":"harryaskham"},{"issue_id":"bd-2zq","depends_on_id":"bd-yag","type":"blocks","created_at":"2026-02-25T23:39:48.120320Z","created_by":"harryaskham"}]}
{"id":"bd-2zw","title":"Update emotionPresets with MAI Voice SSML styles","description":"Replace the current OpenAI-style text emotion presets with MAI Voice supported express-as styles. Supported styles for MAI Voice: empathetic, excitement, joy, friendly, neutral, encouragement, confusion, sadness, surprise, curiosity. The presets should be per-provider: OpenAI keeps text instructions, Azure Speech uses SSML style names. Default emotion for MAI Voice should be 'friendly' instead of 'shy' (which isn't a valid MAI Voice style).","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-2zw\", pr_number: \"26\", status: \"human_review_needed\"}}","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-24T23:34:14.057961Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:33.758719Z","closed_at":"2026-02-24T23:54:33.758678Z","close_reason":"done","external_ref":"26","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
{"id":"bd-31n","title":"Update AGENTS.md with new features from this session","description":"Document: get_logs MCP tool, localBackend config, collapsed More Options header, two-column inbox layout, PulseAudio health check (pls), termux-tts-speak backend, --default-config flag. Several sections are now outdated.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-24T21:12:33.863616Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:59.412393Z","closed_at":"2026-02-24T23:09:59.412358Z","close_reason":"done","external_ref":"7","compaction_level":0,"original_size":0}
{"id":"bd-350","title":"Tabbing away from inbox, j/k keys keep scrolling active option, not inbox items","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-24T20:55:46.789432Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:58.723612Z","closed_at":"2026-02-24T23:09:58.723580Z","close_reason":"done","external_ref":"2","compaction_level":0,"original_size":0}
{"id":"bd-3d6","title":"Make emotion presets provider-aware in config","description":"The emotionPresets config currently has a flat map of name->text that only works for OpenAI's instruction-based TTS. For MAI Voice, presets should map to SSML express-as style names. Options: (a) nested presets per provider, (b) a provider-specific field like 'ssmlStyle' alongside 'instructions' in each preset, or (c) detect the provider at runtime and interpret the preset value differently. The settings menu emotion picker should show only valid emotions for the current TTS model.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-3d6\", pr_number: \"29\", status: \"human_review_needed\"}}","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-24T23:34:14.295331Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:34.460443Z","closed_at":"2026-02-24T23:54:34.460405Z","close_reason":"done","external_ref":"29","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
{"id":"bd-3f9","title":"Text entry like 'i' or 'm' key responses is still not appearing as a true popup modal - it is just replacing the view and disappears when inbox updates","description":"nil","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T22:47:33.030645Z","created_by":"harryaskham","updated_at":"2026-02-25T23:22:21.215333Z","closed_at":"2026-02-25T23:22:21.215273Z","external_ref":"35","compaction_level":0,"original_size":0,"labels":["merged"]}
{"id":"bd-3hc","title":"Inbox notification chime for new queued items","description":"Play a distinct chime sound when a new inbox item arrives while the user is already viewing choices from another item. Should be different from the regular choices chime to signal 'new mail' without being intrusive.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-24T21:12:03.489859Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:58.876741Z","closed_at":"2026-02-24T23:09:58.876709Z","close_reason":"done","external_ref":"11","compaction_level":0,"original_size":0}
{"id":"bd-3hg","title":"speak_async logs speech but audio doesn't play through io-mcp TTS","description":"The user reported hearing fallback TTS (direct paplay pipe) but not io-mcp speak_async calls. Speech is logged in the speech history but audio doesn't reach the phone speakers. May be related to PULSE_SERVER env, paplay process management, or TTS cache generation failing silently. Error logging was added but root cause not found.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-3hg\", pr_number: \"20\", status: \"human_review_needed\"}}","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-24T23:11:30.046606Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:34.051405Z","closed_at":"2026-02-24T23:54:34.051369Z","close_reason":"done","external_ref":"20","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
{"id":"bd-3hk","title":"Add termux command daemon (termux-exec) status indicator to tab bar","description":"Add a status dot for the termux command daemon alongside pls/mcp/tui/api in the tab bar RHS. Check with 'termux-exec true' — exit code 0 means the daemon is up. Label it 'tx'. This is important because termux-tts-speak, termux-vibrate, termux-microphone-record all depend on termux-exec being available.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-3hk\", pr_number: \"30\", status: \"human_review_needed\"}}","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-24T23:40:13.547589Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:34.282846Z","closed_at":"2026-02-24T23:54:34.282805Z","close_reason":"done","external_ref":"30","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
{"id":"bd-3mv","title":"Some text is stil being ellipsis'd i.e 'I've finished exploring the codebase. These are four significant changes that to…'","description":"nil","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T21:57:30.832979Z","created_by":"harryaskham","updated_at":"2026-02-25T23:22:22.462081Z","closed_at":"2026-02-25T23:22:22.462020Z","external_ref":"33","compaction_level":0,"original_size":0,"labels":["merged"]}
{"id":"bd-3nl","title":"TUI becomes unresponsive when inbox has many items","description":"When the inbox pane has many items (10+ done entries from duplicate history), the TUI stops responding to scroll input. The user has to quit and restart. May be related to ListView performance with many InboxListItems or the drain loop blocking.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-3nl\", pr_number: \"22\", status: \"human_review_needed\"}}","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-24T23:11:30.319817Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:33.948839Z","closed_at":"2026-02-24T23:54:33.948802Z","close_reason":"done","external_ref":"22","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
{"id":"bd-3r2","title":"Ensure io-mcp-send and -msg are installed in PATH as part of Nix flake installation","description":"nil","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T17:04:52.582520Z","created_by":"harryaskham","updated_at":"2026-02-25T18:31:12.189551Z","closed_at":"2026-02-25T18:31:12.189506Z","close_reason":"Already working: mkApplication from pyproject-nix picks up all [project.scripts] entrypoints. All three binaries (io-mcp, io-mcp-msg, io-mcp-send) present in nix package and symlinked into ~/.nix-profile/bin/.","compaction_level":0,"original_size":0}
{"id":"bd-3tz","title":"Auto-advance to next inbox item after resolving current","description":"When the user resolves a choice set, automatically advance to the next pending inbox item if one exists. Play the new item's chime and show its choices. Currently the user has to wait for the drain loop to present it.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-02-24T21:12:17.111748Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:59.558686Z","closed_at":"2026-02-24T23:09:59.558655Z","close_reason":"done","external_ref":"16","compaction_level":0,"original_size":0}
{"id":"bd-dj0","title":"Settings menu interactions leak into hidden choices when choices arrive","description":"When choices arrive while settings are open, the settings state is cleared but key presses may still route to settings handlers in edge cases. The force-exit was added but needs more testing for nested menus (setting edit mode, quick settings, etc).","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-24T21:11:46.042758Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:59.042502Z","closed_at":"2026-02-24T23:09:59.042472Z","close_reason":"done","external_ref":"9","compaction_level":0,"original_size":0}
{"id":"bd-kv7","title":"Fix multi-select list resetting to top after toggle","description":"In multi-select mode, toggling a checkbox via Enter or number keys causes _refresh_multi_select() to clear and rebuild the entire ListView (list_view.clear() followed by multiple list_view.append()). Despite attempting to save/restore current_idx, the full clear+rebuild cycle causes Textual's ListView to reset scroll position to the top. Fix by updating existing ChoiceItem widgets' labels/styles in-place (change checkbox [ ] to [x] and update the preamble counter) without touching the ListView structure. Acceptance criteria: scrolling to item 5 of 10, pressing Enter to toggle, cursor stays on item 5.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-kv7\", pr_number: \"36\", status: \"human_review_needed\"}}","status":"in_progress","priority":1,"issue_type":"bug","created_at":"2026-02-25T23:38:47.986895Z","created_by":"harryaskham","updated_at":"2026-02-25T23:44:28.745458Z","external_ref":"36","compaction_level":0,"original_size":0,"labels":["bug","human_review_needed","tui"]}
{"id":"bd-nw3","title":"Clean up orphaned test assertions referencing old EXTRA_OPTIONS layout","description":"Several tests were updated for the collapsed extras but may have fragile hardcoded counts (e.g. assert len(extra_items) == 2). Should use len(PRIMARY_EXTRAS) + 1 (for More options) to be resilient to future changes.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-02-24T21:13:04.165021Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:59.839846Z","closed_at":"2026-02-24T23:09:59.839814Z","close_reason":"done","external_ref":"8","compaction_level":0,"original_size":0}
{"id":"bd-od1","title":"MAI Voice emotions use text instructions instead of SSML express-as styles","description":"The tts_cli_args() method passes emotion as --instructions for all providers, but Azure MAI Voice needs SSML wrapping with <mstts:express-as style=\"EMOTION\">. Currently the emotion preset text (e.g. 'Speak in a warm cheerful tone') is sent as instructions which MAI Voice ignores. The tts CLI tool needs to receive the SSML style name and wrap the text in the correct SSML envelope: <speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xml:lang='en-US'><voice xml:lang='en-US' name='VOICE'><mstts:express-as style='STYLE'>TEXT</mstts:express-as></voice></speak>. The config should pass --ssml-style STYLE for azure-speech provider instead of --instructions.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-od1\", pr_number: \"27\", status: \"human_review_needed\"}}","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-24T23:34:13.792285Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:33.858262Z","closed_at":"2026-02-24T23:54:33.858226Z","close_reason":"done","external_ref":"27","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
{"id":"bd-ppz","title":"TTS stops working after extended use","description":"TTS playback silently fails after the app has been running for a while. No error visible in TUI. Need to check paplay/PulseAudio connection state and auto-reconnect or surface the error. The get_logs MCP tool was added to help diagnose this.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-24T21:11:27.548011Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:58.569298Z","closed_at":"2026-02-24T23:09:58.569263Z","close_reason":"done","external_ref":"3","compaction_level":0,"original_size":0}
{"id":"bd-r1e","title":"Inbox item preview when scrolling in left pane","description":"When the user scrolls through inbox items in the left pane, speak a preview of the preamble via TTS. Currently scrolling in the inbox pane is silent. Should use speak_with_local_fallback for instant readout.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-02-24T21:12:50.250459Z","created_by":"harryaskham","updated_at":"2026-02-24T23:09:59.266926Z","closed_at":"2026-02-24T23:09:59.266895Z","close_reason":"done","external_ref":"12","compaction_level":0,"original_size":0}
{"id":"bd-ua4","title":"io-mcp agents should not be able to ask the user questions or enter Plan mode, b/c this blocks forever","description":"nil","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T18:51:09.595983Z","created_by":"harryaskham","updated_at":"2026-02-25T18:58:30.045057Z","closed_at":"2026-02-25T18:58:30.045011Z","close_reason":"Added explicit instructions in AGENTS.md: NEVER use EnterPlanMode or AskUserQuestion tools. Present decisions via present_choices() instead.","compaction_level":0,"original_size":0}
{"id":"bd-yag","title":"Use Textual workers instead of raw threads for UI tasks","description":"Textual provides a built-in @work decorator and Worker system for running blocking operations without freezing the UI. Currently the TUI spawns raw threads for daemon health checks, pane view refresh, haptic feedback, agent spawning, and message sending. Migrate to Textual workers: (1) _update_daemon_status -> @work(thread=True) with cancellation on app exit, (2) _refresh_pane -> @work(thread=True, exclusive=True) to prevent overlap, (3) _vibrate -> @work(thread=True) for fire-and-forget, (4) _send_to_agent_pane -> @work(thread=True) with error reporting, (5) Voice recording start/stop -> @work(thread=True). Workers provide automatic cancellation, error handling via on_worker_state_changed.","status":"in_progress","priority":2,"issue_type":"task","assignee":"bob","created_at":"2026-02-25T23:39:04.118488Z","created_by":"harryaskham","updated_at":"2026-02-25T23:40:16.572273Z","compaction_level":0,"original_size":0,"labels":["claimed","modernization","tui"]}
{"id":"bd-yll","title":"Add structured logging replacing ad-hoc file writes","description":"Error logging is done via direct file writes: open('/tmp/io-mcp-tui-error.log', 'a') scattered across tts.py (8 occurrences), app.py, and views.py. Each write is wrapped in try/except Exception: pass, swallowing errors silently. No log level differentiation, no structured format, no rotation. Replace with: (1) Python logging module with custom handler writing to existing log file location, (2) Log levels: DEBUG for cache hits, INFO for speech events, WARNING for failures, ERROR for crashes, (3) Structured JSON format for machine-parseable logs (get_logs MCP tool can parse these), (4) Log rotation via RotatingFileHandler (5MB, 3 backups), (5) Context: session_id, tool_name, text preview, timing data.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-yll\", pr_number: \"38\", status: \"approved\"}}","status":"in_progress","priority":3,"issue_type":"task","created_at":"2026-02-25T23:39:04.450701Z","created_by":"harryaskham","updated_at":"2026-02-25T23:49:07.029147Z","external_ref":"38","compaction_level":0,"original_size":0,"labels":["approved","logging","modernization"]}
{"id":"bd-zua","title":"Inbox shows many duplicate done items with identical preambles","description":"When reconnecting or after multiple speak_async + present_choices calls, the inbox left pane shows many duplicate done items with identical truncated preambles. This creates visual clutter and makes the inbox hard to navigate. The dedup logic only prevents creating new identical InboxItems but doesn't deduplicate the done history display.","notes":"[EVENT] {type: \"bead.review_complete\", data: {bead_id: \"bd-zua\", pr_number: \"19\", status: \"human_review_needed\"}}","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-24T23:11:29.805276Z","created_by":"harryaskham","updated_at":"2026-02-24T23:54:34.167641Z","closed_at":"2026-02-24T23:54:34.167604Z","close_reason":"done","external_ref":"19","compaction_level":0,"original_size":0,"labels":["human_review_needed"]}
